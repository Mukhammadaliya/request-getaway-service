# ============================================================
# REQUEST GATEWAY SERVICE â€” Environment Configuration
# ============================================================
# Copy this file to .env and fill in the values for your environment.
# All values here override application.yml defaults.
# ============================================================

# --- Spring Profile ---
SPRING_PROFILE=dev

# --- Server ---
SERVER_PORT=8090
MANAGEMENT_PORT=8091

# ============================================================
# DATA SOURCE (where requests are pulled from / responses saved to)
# ============================================================
SOURCE_BASE_URL=http://localhost:8080/smartup24
SOURCE_USERNAME=admin@head
SOURCE_PASSWORD=greenwhite
SOURCE_PULL_URI=/b/biruni/bmb/requests$pull
SOURCE_SAVE_URI=/b/biruni/bmb/requests$save
SOURCE_TIMEOUT=60

# ============================================================
# KAFKA
# ============================================================
KAFKA_BOOTSTRAP_SERVERS=localhost:19092
KAFKA_GROUP_ID=gateway-service-group
KAFKA_TOPIC_REQUEST=gateway.request.new
KAFKA_TOPIC_RESPONSE=gateway.request.response
KAFKA_TOPIC_DLQ=gateway.request.dlq
KAFKA_PARTITIONS=10

# ============================================================
# REDIS
# ============================================================
REDIS_HOST=localhost
REDIS_PORT=6379

# ============================================================
# POLLING (scheduled pull from data source)
# ============================================================
POLLING_ENABLED=true
POLLING_INTERVAL_MS=5000
POLLING_BATCH_SIZE=100

# ============================================================
# HTTP CLIENT (outbound requests to external APIs)
# ============================================================
HTTP_CONNECT_TIMEOUT=10000
HTTP_READ_TIMEOUT=30000
HTTP_WRITE_TIMEOUT=30000

# ============================================================
# RETRY
# ============================================================
RETRY_MAX_ATTEMPTS=3
RETRY_INTERVAL_MS=3000
RETRY_STATUSES=408,429,500,502,503,504

# ============================================================
# DYNAMIC CONCURRENCY (auto-scaling consumer threads)
# ============================================================
CONCURRENCY_MIN=10
CONCURRENCY_MAX=15
CONCURRENCY_MONITOR_INTERVAL=10000
CONCURRENCY_SCALE_UP=50
CONCURRENCY_SCALE_DOWN=10
CONCURRENCY_SCALE_STEP=2
CONCURRENCY_COOLDOWN=30000

# ============================================================
# OAUTH2 PROVIDERS
# ============================================================
OAUTH2_SMARTUP_TYPE=biruni
OAUTH2_SMARTUP_TOKEN_URL=http://localhost:8080/b6/security/oauth/token
OAUTH2_SMARTUP_CLIENT_ID=your_client_id
OAUTH2_SMARTUP_CLIENT_SECRET=your_client_secret
OAUTH2_SMARTUP_SCOPE=read+write

# ============================================================
# TELEGRAM NOTIFICATIONS
# ============================================================
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=
TELEGRAM_THREAD_ID=

# ============================================================
# CIRCUIT BREAKER
# ============================================================
CB_WINDOW_SIZE=10
CB_MIN_CALLS=5
CB_FAILURE_THRESHOLD=50
CB_WAIT_DURATION=30s
CB_HALF_OPEN_CALLS=3
CB_SLOW_CALL_THRESHOLD=10s
CB_SLOW_CALL_RATE=80

# ============================================================
# LOGGING
# ============================================================
LOG_LEVEL=DEBUG

# ============================================================
# GRAFANA (if using docker-compose)
# ============================================================
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin123